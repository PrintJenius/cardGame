<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cardGameMain</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/hellMain.css">
</head>
<body>
    <header>
        <h1 class="title">카드게임</h1> <button class="resetButton" onclick="resetProgress()">초기화</button>
    </header>
    <section>
        <div class="wrapper">
            <div class="stages">
                <a href="hellStage1.html" class="stageLink"><img src="img/1red.png" class="stageImg"></a>
                <a href="hellStage2.html" class="stageLink locked"><img src="img/2red.png" class="stageImg"></a>
                <a href="hellStage3.html" class="stageLink locked"><img src="img/3red.png" class="stageImg"></a>
                <a href="hellStage4.html" class="stageLink locked"><img src="img/4red.png" class="stageImg"></a>
                <a href="hellStage5.html" class="stageLink locked"><img src="img/5red.png" class="stageImg"></a>
            </div>
            <div class="stages">
                <a href="hellStage6.html" class="stageLink locked"><img src="img/6red.png" class="stageImg"></a>
                <a href="hellStage7.html" class="stageLink locked"><img src="img/7red.png" class="stageImg"></a>
                <a href="hellStage8.html" class="stageLink locked"><img src="img/8red.png" class="stageImg"></a>
                <a href="hellStage9.html" class="stageLink locked"><img src="img/9red.png" class="stageImg"></a>
                <a href="hellStage10.html" class="stageLink locked"><img src="img/10red.png" class="stageImg"></a>
            </div>
            <img id="hellGate" class="hellGate" src="img/hellGate.jpg">
        </div>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        // 로컬 저장소에서 스테이지 진행 상황을 로드
        const hellStages = document.querySelectorAll('.stageLink');
        const hellStageProgress = JSON.parse(localStorage.getItem('hellStageProgress')) || [];

        // 각 스테이지의 상태를 업데이트
        hellStages.forEach((stage, index) => {
            if (index < hellStageProgress.length && hellStageProgress[index]) {
                stage.classList.remove('locked');
                stage.href = `hellStage${index + 1}.html`;
            }
        });

        // -1 하는 이유는 0번째 인덱스가 null이기 때문
        const allStagesUnlocked = hellStageProgress.length - 1 === hellStages.length;
        });

        function resetProgress() {
            localStorage.removeItem('hellStageProgress');
            window.location.reload();
        }
    </script>
</body>
</html>